# microcomputer_bubleSort

单片机 + LCD1602实现冒泡排序

## 1.1. 设计目的

1. 通过按键的功能复用，输入一组两位以上的数据，一组数据不少于6个；
2. 通过按键控制数字从大到小或者从小到大排序；
3. 在1602液晶上显示冒泡排序。

## 1.2. 设计任务

单片机实现冒泡排序：
1. 液晶提示用户输入，一旦检测到输入即在液晶上显示当前输入的数字。
2. 通过10个数字按键输入数据，每输入两个数字会有空格隔开以区分位数。
3. 代码低耦合，可以通过修改参数改变输入数据位数以及个数。
4. 单片机计算后由用户按键选择排序顺序显示在液晶上。

## 1.3. 原理框图及说明

![](https://ythdong.gitee.io/blog_image/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E5%8D%95%E7%89%87%E6%9C%BA1.png)

1. 电源部分：由于没有硬件实物只进行了仿真，所以电源电路在Proteus中并未画出，实物应是5V的电源电路；
2. 数字按键：10个数字按键提供给用户作为数据输入源使用；
3. 液晶电路：液晶实时显示输入数据以及显示排序后的数据；
4. 输入检测：输入检测电路接到了P1^7口，用于在液晶显示输入提示时检测用户是否开始按键输入，此处通过反相器 + 二极管串联在10个数字按键上，一旦用户输入就能检测到，然后液晶开始显示实时输入数据，并且10个数字按键之间由于二极管的单向导通性不会相互影响。
5. 排序选择：在用户输入结束之后已经完成了冒泡排序，最后通过用户选择默认排序还是反向排序显示到液晶上。

## 1.4. 主要电路说明、元件选择及参数计算

对于晶振电路和复位电路中电容、电阻以及晶振频率的选择参考福讯公司提供的实物参数，也就是学校的那个实物，方便以后实物操作，其余的元件我只用到了按键、二极管、液晶、反向器均没有选择的余地，大都是有什么能用的就用什么。

## 1.5. 复位与振荡电路

复位电路如下图，由C3和R1构成。由于51单片机为低电平复位，图示电路利用电容的特性，在刚刚外加5V电源时RST脚的电压为低。时间常数=RC=38mS，满足芯片复位要求。由于电压为5V，可选择耐压的电容即可。

![](https://ythdong.gitee.io/blog_image/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E5%8D%95%E7%89%87%E6%9C%BA2.png)

## 1.6. 液晶电路

![](https://ythdong.gitee.io/blog_image/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E5%8D%95%E7%89%87%E6%9C%BA3.png)

## 1.7. 按键电路

![](https://ythdong.gitee.io/blog_image/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E5%8D%95%E7%89%87%E6%9C%BA4.png)

## 1.8. 输出监测电路

![](https://ythdong.gitee.io/blog_image/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E5%8D%95%E7%89%87%E6%9C%BA5.png)

这里的按键输入检测主要是为了让液晶及时地实时地显示用户输入的数据，因为所有的按键都是接地的，一旦被按下则电平为0，并且按键检测电路使用了反相器 + 二极管串联的方法，在代码中一开始我就将P1^7口初始化为0，这样当数字按键被按下时低电平经过反相器变成高电平通过二极管到达P1^7口为1则标志着用户已经开始输入了，此时液晶要显示数据。

## 1.9. 总电路

![](https://ythdong.gitee.io/blog_image/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E5%8D%95%E7%89%87%E6%9C%BA6.png)

## 1.10. 软件设计思路及主流程图

![](https://ythdong.gitee.io/blog_image/%E4%B8%93%E4%B8%9A%E8%AF%BE/%E5%8D%95%E7%89%87%E6%9C%BA7.png)
